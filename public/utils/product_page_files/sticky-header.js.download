customElements.get("sticky-header")||customElements.define("sticky-header",class extends HTMLElement{constructor(){super()}connectedCallback(){this.stickyDisabled=this.getAttribute("disabled")==="true",this.header=document.querySelector(".section-header"),this.alwaysSticky=this.dataset.alwaysOn==="true",this.headerBounds={},this.currentScrollTop=0,this.preventReveal=!1,this.predictiveSearch=this.querySelector("predictive-search"),this.alwaysSticky&&this.header.classList.add("section-header-sticky-always"),this.onScrollHandler=this.onScroll.bind(this),this.hideHeaderOnScrollUp=()=>{this.preventReveal=!0},this.addEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.addEventListener("scroll",this.onScrollHandler,!1),this.createObserver()}disconnectedCallback(){this.removeEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.removeEventListener("scroll",this.onScrollHandler)}createObserver(){new IntersectionObserver((entries,observer2)=>{this.headerBounds=entries[0].intersectionRect,observer2.disconnect()}).observe(this.header)}onScroll(){const scrollTop=window.pageYOffset||document.documentElement.scrollTop;this.predictiveSearch&&this.predictiveSearch.isOpen||(scrollTop>this.currentScrollTop&&scrollTop>this.headerBounds.bottom?requestAnimationFrame(this.hide.bind(this)):scrollTop<this.currentScrollTop&&scrollTop>this.headerBounds.bottom?!this.preventReveal&&!this.stickyDisabled?requestAnimationFrame(this.reveal.bind(this)):(window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout(()=>{this.preventReveal=!1},66),requestAnimationFrame(this.hide.bind(this))):!this.stickyDisabled&&scrollTop<=this.headerBounds.top?requestAnimationFrame(this.reset.bind(this)):this.stickyDisabled&&scrollTop<=this.headerBounds.bottom&&requestAnimationFrame(this.reset.bind(this)),this.currentScrollTop=scrollTop)}hide(){this.alwaysSticky||(this.header.classList.add("section-header-hidden","section-header-sticky"),this.closeHeaderDropdowns())}reveal(){this.alwaysSticky||(this.header.classList.add("section-header-sticky","animate"),this.header.classList.remove("section-header-hidden"))}reset(){this.header.classList.remove("section-header-hidden","section-header-sticky","animate")}closeHeaderDropdowns(){const headerLocalizationDropdowns=this.header.querySelectorAll("localization-form"),headerDropdowns=this.header.querySelectorAll(".dropdown-modal");headerLocalizationDropdowns.forEach(dropdown=>{dropdown.hidePanel()}),headerDropdowns.forEach(dropdown=>{dropdown.close()})}});
//# sourceMappingURL=/cdn/shop/t/2/assets/sticky-header.js.map?v=167318981475843208341718583757
